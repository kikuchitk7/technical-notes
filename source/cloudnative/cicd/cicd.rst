CI/CD
==================

.. toctree::
   :maxdepth: 1
   :caption: Contents:

   git/git
   iac/iac

.. _cicd:

CI/CD
-----------------
- AWS のホワイトペーパーによる定義。

    継続的インテグレーションと継続的デリバリー (CI/CD) は、システムの安定性とセキュリティを維持しながら、迅速なソフトウェアの変更を可能にするプラクティスです。

CI (Continuous Integration)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
- AWS のホワイトペーパーによる定義。

    | **継続的インテグレーション (CI) とは、開発者が定期的にコードに対する変更をセントラルリポジトリにマージし、その後自動化されたビルドとテストが実行されるソフトウェア開発手法** です。
    | CI は、ほとんどの場合ソフトウェアリリースプロセスのビルドまたはインテグレーションステージを指し、自動化コンポーネント (CI やビルドサービスなど) およびカルチャー的要素 (例えば、頻繁に統合することを学ぶこと) などを必要とします。
    | **CI の主な目標は、バグを早期に発見して対処し、ソフトウェアの品質を向上し、新しいソフトウェアアップデートの検証とリリースにかかる時間を短縮すること** です。
    |
    | 継続的インテグレーションでは、**より小さなコミットと、統合するためのより小さなコードの変更** に焦点を当てます。
    | 開発者は、定期的な間隔で、少なくとも 1 日に 1 回コードをコミットします。
    | 開発者は、コードリポジトリからコードをプルし、ビルドサーバーにプッシュする前に、ローカルホスト上でコードがマージできることを確認します。
    | このステージでは、ビルドサーバーで様々なテストを実行し、コードのコミットを許可または拒否します。
    |
    | CI を実装する際の基本的な課題には、**共通のコードベースへのより頻繁なコミット、単一のソースコードリポジトリの維持、ビルドの自動化、テストの自動化** などがあります。
    | さらに、**本番環境に類似した環境でのテスト、チームへのプロセスの可視性の提供、開発者がアプリケーションのすべてのバージョンを容易に取得できるようにすること** などの課題があります。


CD (Continuous Delivery/Deploy)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
- Continuous Delivery と Continuous Deploy は異なる。

.. image:: ../../../images/aws_cicd_pipeline.png


Continuous Delivery
++++++++++++++++++++++++++++++++
- AWS のホワイトペーパーによる定義。

    | **継続的デリバリー (CD) とは、コードの変更によって自動的なビルド、テスト、本番環境へのリリースの準備を実施するソフトウェア開発のプラクティス** です。
    | ビルドステージが完了した後でテスト環境または本番環境、あるいはその両方にすべてのコード変更をデプロイすることで、継続的インテグレーションを拡張します。
    | 継続的デリバリーは、**ワークフロープロセスを使用して完全に自動化するか、重要なポイントで手動ステップを使用して部分的に自動化することができます。**
    | 継続的デリバリーが適切に実装されている場合、**開発者は、標準化されたテストプロセスをパスしたデプロイ可能なビルドアーティファクトを常に手元に持つ** ことになります。

- CD のメリット

    - プロセスの自動化
    - 開発者の生産性の向上
    - コード品質の向上
    - 顧客へのアップデートデリバリーの迅速化


Continuous Deploy
+++++++++++++++++++++++++++++
- AWS のホワイトペーパーによる定義。

    | 継続的デプロイを使用すると、**開発者からの明示的な承認なしでリビジョンが本番環境にデプロイされ、ソフトウェアリリースプロセス全体が自動化** されます。
    | これにより、製品ライフサイクルの早い段階で継続的なフィードバックループを実現することができます。


参考
--------------
- `AWS における継続的インテグレーションと継続的デリバリーの実践 DevOps によるソフトウェアデリバリーの迅速化 <https://d1.awsstatic.com/International/ja_JP/Whitepapers/practicing-continuous-integration-continuous-delivery-on-AWS_JA_final.pdf>`_
- `AWSマネージドサービスで実現する CI/CD パイプライン <https://d1.awsstatic.com/events/jp/2017/summit/slide/D4T2-6.pdf>`_
